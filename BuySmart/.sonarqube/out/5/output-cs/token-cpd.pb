Ü
.D:\Repos\BuySmart\BuySmart\BuySmart\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddApplication 
(  
)  !
;! "
builder		 
.		 
Services		 
.		 
AddInfrastructure		 "
(		" #
builder		# *
.		* +
Configuration		+ 8
)		8 9
;		9 :
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseMiddleware 
< '
ExceptionHandlingMiddleware -
>- .
(. /
)/ 0
;0 1
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
await!! 
app!! 	
.!!	 

RunAsync!!
 
(!! 
)!! 
;!! 
public## 
static## 
partial## 
class## 
Program## #
{##$ %
}##& '”*
MD:\Repos\BuySmart\BuySmart\BuySmart\Middleware\ExceptionHandlingMiddleware.cs
	namespace 	
BuySmart
 
. 

Middleware 
{ 
public 

class '
ExceptionHandlingMiddleware ,
{ 
private 
readonly 
RequestDelegate (
_next) .
;. /
public

 '
ExceptionHandlingMiddleware

 *
(

* +
RequestDelegate

+ :
next

; ?
)

? @
{ 	
_next 
= 
next 
; 
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
httpContext2 =
)= >
{ 	
try 
{ 
await 
_next 
( 
httpContext '
)' (
;( )
} 
catch 
( 
FluentValidation #
.# $
ValidationException$ 7
ex8 :
): ;
{ 
await *
HandleValidationExceptionAsync 4
(4 5
httpContext5 @
,@ A
exB D
)D E
;E F
} 
catch 
(  
KeyNotFoundException '
ex( *
)* +
{ 
await +
HandleKeyNotFoundExceptionAsync 5
(5 6
httpContext6 A
,A B
exC E
)E F
;F G
} 
catch 
( 
	Exception 
ex 
)  
{ 
await  
HandleExceptionAsync *
(* +
httpContext+ 6
,6 7
ex8 :
): ;
;; <
}   
}!! 	
private## 
static## 
async## 
Task## !+
HandleKeyNotFoundExceptionAsync##" A
(##A B
HttpContext##B M
httpContext##N Y
,##Y Z 
KeyNotFoundException##[ o
ex##p r
)##r s
{$$ 	
httpContext%% 
.%% 
Response%%  
.%%  !
ContentType%%! ,
=%%- .
$str%%/ A
;%%A B
httpContext&& 
.&& 
Response&&  
.&&  !

StatusCode&&! +
=&&, -
(&&. /
int&&/ 2
)&&2 3
HttpStatusCode&&3 A
.&&A B
NotFound&&B J
;&&J K
await(( 
httpContext(( 
.(( 
Response(( &
.((& '

WriteAsync((' 1
(((1 2
JsonSerializer((2 @
.((@ A
	Serialize((A J
(((J K
new((K N
{((O P
error((Q V
=((W X
ex((Y [
.(([ \
Message((\ c
}((d e
)((e f
)((f g
;((g h
})) 	
private++ 
static++ 
Task++ *
HandleValidationExceptionAsync++ :
(++: ;
HttpContext++; F
context++G N
,++N O
FluentValidation++P `
.++` a
ValidationException++a t
	exception++u ~
)++~ 
{,, 	
context-- 
.-- 
Response-- 
.-- 
ContentType-- (
=--) *
$str--+ =
;--= >
context.. 
... 
Response.. 
... 

StatusCode.. '
=..( )
(..* +
int..+ .
)... /
HttpStatusCode../ =
...= >

BadRequest..> H
;..H I
var00 
errors00 
=00 
	exception00 "
.00" #
Errors00# )
.00) *
Select00* 0
(000 1
e001 2
=>003 5
new006 9
{00: ;
e00< =
.00= >
PropertyName00> J
,00J K
e00L M
.00M N
ErrorMessage00N Z
}00[ \
)00\ ]
;00] ^
return33 
context33 
.33 
Response33 #
.33# $

WriteAsync33$ .
(33. /
JsonSerializer33/ =
.33= >
	Serialize33> G
(33G H
new33H K
{33L M
errors33N T
}33U V
)33V W
)33W X
;33X Y
}44 	
private66 
static66 
Task66  
HandleExceptionAsync66 0
(660 1
HttpContext661 <
context66= D
,66D E
	Exception66F O
	exception66P Y
)66Y Z
{77 	
context88 
.88 
Response88 
.88 
ContentType88 (
=88) *
$str88+ =
;88= >
context99 
.99 
Response99 
.99 

StatusCode99 '
=99( )
(99* +
int99+ .
)99. /
HttpStatusCode99/ =
.99= >
InternalServerError99> Q
;99Q R
return;; 
context;; 
.;; 
Response;; #
.;;# $

WriteAsync;;$ .
(;;. /
JsonSerializer;;/ =
.;;= >
	Serialize;;> G
(;;G H
new;;H K
{;;L M
error;;N S
=;;T U
	exception;;V _
.;;_ `
Message;;` g
};;h i
);;i j
);;j k
;;;k l
}<< 	
}== 
}>> •;
GD:\Repos\BuySmart\BuySmart\BuySmart\Controllers\UserClientController.cs
	namespace		 	
BuySmart		
 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class  
UserClientController %
:& '
ControllerBase( 6
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public  
UserClientController #
(# $
	IMediator$ -
mediator. 6
)6 7
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpGet	 
( 
$str $
)$ %
]% &
public 
async 
Task 
< 
IActionResult '
>' (
GetAllUsers) 4
(4 5
int5 8

pageNumber9 C
=D E
$numF G
,G H
intI L
pageSizeM U
=V W
$numX Z
)Z [
{ 	
var 
users 
= 
await 
mediator &
.& '
Send' +
(+ ,
new, /"
GetAllUserClientsQuery0 F
{G H

pageNumberI S
=T U

pageNumberV `
,` a
pageSizeb j
=k l
pageSizem u
}u v
)v w
;w x
return 
Ok 
( 
users 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str )
)) *
]* +
public 
async 
Task 
< 
ActionResult &
<& '
UserClientDto' 4
>4 5
>5 6
GetUserById7 B
(B C
GuidC G
idH J
)J K
{ 	
return 
await 
mediator !
.! "
Send" &
(& '
new' *"
GetUserClientByIdQuery+ A
{B C
IdD F
=G H
idI K
}L M
)M N
;N O
} 	
[!! 	
HttpPost!!	 
(!! 
$str!! -
)!!- .
]!!. /
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
<""& '
Result""' -
<""- .
Guid"". 2
>""2 3
>""3 4
>""4 5
CreateUserClient""6 F
(""F G
[""G H
FromBody""H P
]""P Q#
CreateUserClientCommand""R i
command""j q
)""q r
{## 	
command$$ 
.$$ 
Password$$ 
=$$ 
BCrypt$$ %
.$$% &
Net$$& )
.$$) *
BCrypt$$* 0
.$$0 1
HashPassword$$1 =
($$= >
command$$> E
.$$E F
Password$$F N
)$$N O
;$$O P
var&& 
result&& 
=&& 
await&& 
mediator&& '
.&&' (
Send&&( ,
(&&, -
command&&- 4
)&&4 5
;&&5 6
if'' 
('' 
!'' 
result'' 
.'' 
	IsSuccess'' !
)''! "
{(( 
return)) 

BadRequest)) !
())! "
result))" (
.))( )
ErrorMessage))) 5
)))5 6
;))6 7
}** 
CreateCartCommand++ 
createCartCommand++ /
=++0 1
new++2 5
CreateCartCommand++6 G
{++H I
UserClientId++J V
=++W X
result++Y _
.++_ `
Data++` d
}++e f
;++f g
var,, 

cartResult,, 
=,, 
await,, "
mediator,,# +
.,,+ ,
Send,,, 0
(,,0 1
createCartCommand,,1 B
),,B C
;,,C D
if-- 
(-- 
!-- 

cartResult-- 
.-- 
	IsSuccess-- %
)--% &
{.. 
await// 
mediator// 
.// 
Send// #
(//# $
new//$ '#
DeleteUserClientCommand//( ?
{//@ A
UserId//B H
=//I J
result//K Q
.//Q R
Data//R V
}//W X
)//X Y
;//Y Z
return00 

BadRequest00 !
(00! "

cartResult00" ,
.00, -
ErrorMessage00- 9
)009 :
;00: ;
}11 
return22 
CreatedAtAction22 "
(22" #
nameof22# )
(22) *
CreateUserClient22* :
)22: ;
,22; <
new22= @
{22A B
id22C E
=22F G
result22H N
.22N O
Data22O S
}22T U
,22U V
result22W ]
.22] ^
Data22^ b
)22b c
;22c d
}33 	
[55 	

HttpDelete55	 
(55 
$str55 0
)550 1
]551 2
public66 
async66 
Task66 
<66 
ActionResult66 &
>66& '
DeleteUserById66( 6
(666 7
Guid667 ;
id66< >
)66> ?
{77 	
await88 
mediator88 
.88 
Send88 
(88  
new88  ##
DeleteUserClientCommand88$ ;
{88< =
UserId88> D
=88E F
id88G I
}88J K
)88K L
;88L M
return99 
	NoContent99 
(99 
)99 
;99 
}:: 	
[<< 	
HttpPut<<	 
(<< 
$str<< -
)<<- .
]<<. /
public== 
async== 
Task== 
<== 
ActionResult== &
<==& '
Result==' -
<==- .
object==. 4
>==4 5
>==5 6
>==6 7

UpdateUser==8 B
(==B C
Guid==C G
id==H J
,==J K
[==L M
FromBody==M U
]==U V#
UpdateUserClientCommand==W n
command==o v
)==v w
{>> 	
if?? 
(?? 
id?? 
!=?? 
command?? 
.?? 
UserId?? $
)??$ %
{@@ 
returnAA 

BadRequestAA !
(AA! "
)AA" #
;AA# $
}BB 
commandCC 
.CC 
PasswordCC 
=CC 
BCryptCC %
.CC% &
NetCC& )
.CC) *
BCryptCC* 0
.CC0 1
HashPasswordCC1 =
(CC= >
commandCC> E
.CCE F
PasswordCCF N
)CCN O
;CCO P
varDD 
resultDD 
=DD 
awaitDD 
mediatorDD '
.DD' (
SendDD( ,
(DD, -
commandDD- 4
)DD4 5
;DD5 6
ifEE 
(EE 
!EE 
resultEE 
.EE 
	IsSuccessEE !
)EE! "
{FF 
returnGG 

BadRequestGG !
(GG! "
resultGG" (
.GG( )
ErrorMessageGG) 5
)GG5 6
;GG6 7
}HH 
returnII 
	NoContentII 
(II 
)II 
;II 
}JJ 	
}KK 
}LL –0
ID:\Repos\BuySmart\BuySmart\BuySmart\Controllers\UserBusinessController.cs
	namespace 	
BuySmart
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

  
)

  !
]

! "
[ 
ApiController 
] 
public 

class "
UserBusinessController '
:( )
ControllerBase* 8
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public "
UserBusinessController %
(% &
	IMediator& /
mediator0 8
)8 9
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpPost	 
( 
$str &
)& '
]' (
public 
async 
Task 
< 
ActionResult &
<& '
Result' -
<- .
Guid. 2
>2 3
>3 4
>4 5
CreateUserBusiness6 H
(H I
[I J
FromBodyJ R
]R S%
CreateUserBusinessCommandT m
commandn u
)u v
{ 	
command 
. 
Password 
= 
BCrypt %
.% &
Net& )
.) *
BCrypt* 0
.0 1
HashPassword1 =
(= >
command> E
.E F
PasswordF N
)N O
;O P
var 
result 
= 
await 
mediator '
.' (
Send( ,
(, -
command- 4
)4 5
;5 6
if 
( 
! 
result 
. 
	IsSuccess !
)! "
{ 
return 

BadRequest !
(! "
result" (
.( )
ErrorMessage) 5
)5 6
;6 7
} 
return 
CreatedAtAction "
(" #
nameof# )
() *
CreateUserBusiness* <
)< =
,= >
new? B
{C D
idE G
=H I
resultJ P
.P Q
DataQ U
}V W
,W X
resultY _
._ `
Data` d
)d e
;e f
} 	
[ 	

HttpDelete	 
( 
$str 2
)2 3
]3 4
public   
async   
Task   
<   
ActionResult   &
>  & '
DeleteUserBusiness  ( :
(  : ;
Guid  ; ?
id  @ B
)  B C
{!! 	
await"" 
mediator"" 
."" 
Send"" 
(""  
new""  #%
DeleteUserBusinessCommand""$ =
{""> ?
UserId""@ F
=""G H
id""I K
}""L M
)""M N
;""N O
return## 
	NoContent## 
(## 
)## 
;## 
}$$ 	
[%% 	
HttpPut%%	 
(%% 
$str%% /
)%%/ 0
]%%0 1
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
<''& '
Result''' -
<''- .
object''. 4
>''4 5
>''5 6
>''6 7
UpdateUserBusiness''8 J
(''J K
Guid''K O
id''P R
,''R S
[''T U
FromBody''U ]
]''] ^%
UpdateUserBusinessCommand''_ x
command	''y Ä
)
''Ä Å
{(( 	
command)) 
.)) 
Password)) 
=)) 
BCrypt)) %
.))% &
Net))& )
.))) *
BCrypt))* 0
.))0 1
HashPassword))1 =
())= >
command))> E
.))E F
Password))F N
)))N O
;))O P
if** 
(** 
id** 
!=** 
command** 
.** 
UserId** $
)**$ %
{++ 
return,, 

BadRequest,, !
(,,! "
),," #
;,,# $
}-- 
await.. 
mediator.. 
... 
Send.. 
(..  
command..  '
)..' (
;..( )
return// 
	NoContent// 
(// 
)// 
;// 
}11 	
[22 	
HttpGet22	 
(22 
$str22 0
)220 1
]221 2
public44 
async44 
Task44 
<44 
ActionResult44 &
<44& '
UserBusinessDto44' 6
>446 7
>447 8
GetUserBusinessById449 L
(44L M
Guid44M Q
id44R T
)44T U
{55 	
return66 
await66 
mediator66 !
.66! "
Send66" &
(66& '
new66' *$
GetUserBusinessByIdQuery66+ C
{66D E
Id66F H
=66I J
id66K M
}66N O
)66O P
;66P Q
}77 	
[99 	
HttpGet99	 
(99 
$str99 '
)99' (
]99( )
public:: 
async:: 
Task:: 
<:: 
ActionResult:: &
>::& ' 
GetAllUserBusinesses::( <
(::< =
int::= @

pageNumber::A K
=::L M
$num::N O
,::O P
int::Q T
pageSize::U ]
=::^ _
$num::` b
)::b c
{;; 	
var<< 
users<< 
=<< 
await<< 
mediator<< &
.<<& '
Send<<' +
(<<+ ,
new<<, /%
GetAllUserBusinessesQuery<<0 I
{<<J K

pageNumber<<L V
=<<W X

pageNumber<<Y c
,<<c d
pageSize<<e m
=<<n o
pageSize<<p x
}<<y z
)<<z {
;<<{ |
return== 
Ok== 
(== 
users== 
)== 
;== 
}?? 	
}AA 
}BB ù,
KD:\Repos\BuySmart\BuySmart\BuySmart\Controllers\ReviewBusinessController.cs
	namespace 	
BuySmart
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

  
)

  !
]

! "
[ 
ApiController 
] 
public 

class $
ReviewBusinessController )
:* +
ControllerBase, :
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public $
ReviewBusinessController '
(' (
	IMediator( 1
mediator2 :
): ;
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpGet	 
( 
$str )
)) *
]* +
public 
async 
Task 
< 
IActionResult '
>' ("
GetAllReviewBusinesses) ?
(? @
)@ A
{ 	
var 
reviews 
= 
await 
mediator  (
.( )
Send) -
(- .
new. 1'
GetAllReviewBusinessesQuery2 M
(M N
)N O
)O P
;P Q
return 
Ok 
( 
reviews 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str -
)- .
]. /
public 
async 
Task 
< 
ActionResult &
<& '
	ReviewDto' 0
>0 1
>1 2
GetReviewById3 @
(@ A
GuidA E
idF H
)H I
{ 	
return 
await 
mediator !
.! "
Send" &
(& '
new' *&
GetReviewBusinessByIdQuery+ E
{F G
IdH J
=K L
idM O
}P Q
)Q R
;R S
} 	
[!! 	
HttpPost!!	 
(!! 
$str!! (
)!!( )
]!!) *
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
<""& '
Result""' -
<""- .
Guid"". 2
>""2 3
>""3 4
>""4 5
CreateReview""6 B
(""B C
[""C D
FromBody""D L
]""L M'
CreateReviewBusinessCommand""N i
command""j q
)""q r
{## 	
var$$ 
result$$ 
=$$ 
await$$ 
mediator$$ '
.$$' (
Send$$( ,
($$, -
command$$- 4
)$$4 5
;$$5 6
if%% 
(%% 
!%% 
result%% 
.%% 
	IsSuccess%% !
)%%! "
{&& 
return'' 

BadRequest'' !
(''! "
result''" (
.''( )
ErrorMessage'') 5
)''5 6
;''6 7
}(( 
return)) 
CreatedAtAction)) "
())" #
nameof))# )
())) *
CreateReview))* 6
)))6 7
,))7 8
new))9 <
{))= >
id))? A
=))B C
result))D J
.))J K
Data))K O
}))P Q
,))Q R
result))S Y
.))Y Z
Data))Z ^
)))^ _
;))_ `
}** 	
[,, 	
HttpPut,,	 
(,, 
$str,, 1
),,1 2
],,2 3
public-- 
async-- 
Task-- 
<-- 
ActionResult-- &
<--& '
Result--' -
<--- .
object--. 4
>--4 5
>--5 6
>--6 7
UpdateReview--7 C
(--C D
Guid--D H
id--I K
,--K L
[--M N
FromBody--N V
]--V W'
UpdateReviewBusinessCommand--X s
command--t {
)--{ |
{.. 	
if// 
(// 
id// 
!=// 
command// 
.// 
ReviewId// &
)//& '
{00 
return11 

BadRequest11 !
(11! "
)11" #
;11# $
}22 
var33 
result33 
=33 
await33 
mediator33 '
.33' (
Send33( ,
(33, -
command33- 4
)334 5
;335 6
if44 
(44 
!44 
result44 
.44 
	IsSuccess44 !
)44! "
{55 
return66 

BadRequest66 !
(66! "
result66" (
.66( )
ErrorMessage66) 5
)665 6
;666 7
}77 
return88 
	NoContent88 
(88 
)88 
;88 
}99 	
[;; 	

HttpDelete;;	 
(;; 
$str;; 
);;  
];;  !
public<< 
async<< 
Task<< 
<<< 
ActionResult<< &
><<& '
DeleteReviewById<<( 8
(<<8 9
Guid<<9 =
id<<> @
)<<@ A
{== 	
await>> 
mediator>> 
.>> 
Send>> 
(>>  
new>>  #'
DeleteReviewBusinessCommand>>$ ?
{>>@ A
ReviewId>>B J
=>>K L
id>>M O
}>>P Q
)>>Q R
;>>R S
return?? 
	NoContent?? 
(?? 
)?? 
;?? 
}@@ 	
}AA 
}BB ±6
DD:\Repos\BuySmart\BuySmart\BuySmart\Controllers\ProductController.cs
	namespace		 	
BuySmart		
 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
ProductController "
:# $
ControllerBase% 3
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public 
ProductController  
(  !
	IMediator! *
mediator+ 3
)3 4
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpGet	 
( 
$str !
)! "
]" #
public 
async 
Task 
< 
IActionResult '
>' (
GetAllProducts) 7
(7 8
[8 9
	FromQuery9 B
]B C
stringD J
?J K
nameL P
,P Q
[R S
	FromQueryS \
]\ ]
Guid^ b
?b c

categoryIdd n
,n o
[p q
	FromQueryq z
]z {
decimal	| É
?
É Ñ
minPrice
Ö ç
,
ç é
[
è ê
	FromQuery
ê ô
]
ô ö
decimal
õ ¢
?
¢ £
maxPrice
§ ¨
,
¨ ≠
ProductOrder
Æ ∫
order
ª ¿
,
¿ ¡
int
¬ ≈

pageNumber
∆ –
=
— “
$num
” ‘
,
‘ ’
int
÷ Ÿ
pageSize
⁄ ‚
=
„ ‰
$num
Â Á
)
Á Ë
{ 	
var 
query 
= 
new 
GetAllProductsQuery /
{ 
Name 
= 
name 
, 

CategoryId 
= 

categoryId '
,' (
MinPrice 
= 
minPrice #
,# $
MaxPrice 
= 
maxPrice #
,# $

pageNumber 
= 

pageNumber '
,' (
pageSize 
= 
pageSize #
,# $
order   
=   
order   
}!! 
;!! 
var"" 
products"" 
="" 
await""  
mediator""! )
."") *
Send""* .
("". /
query""/ 4
)""4 5
;""5 6
return## 
Ok## 
(## 
products## 
)## 
;##  
}$$ 	
[&& 	
HttpGet&&	 
(&& 
$str&& &
)&&& '
]&&' (
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
<''& '

ProductDto''' 1
>''1 2
>''2 3
GetProductById''4 B
(''B C
Guid''C G
id''H J
)''J K
{(( 	
return)) 
await)) 
mediator)) !
.))! "
Send))" &
())& '
new))' *
GetProductByIdQuery))+ >
{))? @
	ProductId))A J
=))K L
id))M O
}))P Q
)))Q R
;))R S
}** 	
[,, 	
HttpPost,,	 
(,, 
$str,, !
),,! "
],," #
public-- 
async-- 
Task-- 
<-- 
ActionResult-- &
<--& '
Result--' -
<--- .
Guid--. 2
>--2 3
>--3 4
>--4 5
CreateProduct--6 C
(--C D
[--D E
FromBody--E M
]--M N 
CreateProductCommand--O c
command--d k
)--k l
{.. 	
var// 
result// 
=// 
await// 
mediator// '
.//' (
Send//( ,
(//, -
command//- 4
)//4 5
;//5 6
if00 
(00 
!00 
result00 
.00 
	IsSuccess00 !
)00! "
{11 
return22 

BadRequest22 !
(22! "
result22" (
.22( )
ErrorMessage22) 5
)225 6
;226 7
}33 
return44 
CreatedAtAction44 "
(44" #
nameof44# )
(44) *
CreateProduct44* 7
)447 8
,448 9
new44: =
{44> ?
id44@ B
=44C D
result44E K
.44K L
Data44L P
}44Q R
,44R S
result44T Z
.44Z [
Data44[ _
)44_ `
;44` a
}55 	
[77 	
HttpPut77	 
(77 
$str77 *
)77* +
]77+ ,
public88 
async88 
Task88 
<88 
ActionResult88 &
<88& '
Result88' -
<88- .
object88. 4
>884 5
>885 6
>886 7
UpdateProduct888 E
(88E F
Guid88F J
id88K M
,88M N
[88O P
FromBody88P X
]88X Y 
UpdateProductCommand88Z n
command88o v
)88v w
{99 	
if:: 
(:: 
id:: 
!=:: 
command:: 
.:: 
	ProductId:: '
)::' (
{;; 
return<< 

BadRequest<< !
(<<! "
)<<" #
;<<# $
}== 
var>> 
result>> 
=>> 
await>> 
mediator>> '
.>>' (
Send>>( ,
(>>, -
command>>- 4
)>>4 5
;>>5 6
if@@ 
(@@ 
!@@ 
result@@ 
.@@ 
	IsSuccess@@ !
)@@! "
{AA 
returnBB 

BadRequestBB !
(BB! "
resultBB" (
.BB( )
ErrorMessageBB) 5
)BB5 6
;BB6 7
}CC 
returnEE 
	NoContentEE 
(EE 
)EE 
;EE 
}FF 	
[HH 	

HttpDeleteHH	 
(HH 
$strHH -
)HH- .
]HH. /
publicII 
asyncII 
TaskII 
<II 
ActionResultII &
>II& '
DeleteProductByIdII( 9
(II9 :
GuidII: >
idII? A
)IIA B
{JJ 	
awaitKK 
mediatorKK 
.KK 
SendKK 
(KK  
newKK  # 
DeleteProductCommandKK$ 8
{KK9 :
	ProductIdKK; D
=KKE F
idKKG I
}KKJ K
)KKK L
;KKL M
returnLL 
	NoContentLL 
(LL 
)LL 
;LL 
}MM 	
}NN 
}OO ˝+
ED:\Repos\BuySmart\BuySmart\BuySmart\Controllers\BusinessController.cs
	namespace 	
BuySmart
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

  
)

  !
]

! "
[ 
ApiController 
] 
public 

class 
BusinessController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public 
BusinessController !
(! "
	IMediator" +
mediator, 4
)4 5
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpGet	 
( 
$str #
)# $
]$ %
public 
async 
Task 
< 
IActionResult '
>' (
GetAllBusinesses) 9
(9 :
): ;
{ 	
var 

businesses 
= 
await "
mediator# +
.+ ,
Send, 0
(0 1
new1 4!
GetAllBusinessesQuery5 J
(J K
)K L
)L M
;M N
return 
Ok 
( 

businesses  
)  !
;! "
} 	
[ 	
HttpGet	 
( 
$str '
)' (
]( )
public 
async 
Task 
< 
ActionResult &
<& '
BusinessDto' 2
>2 3
>3 4
GetBusinessById5 D
(D E
GuidE I
idJ L
)L M
{ 	
return 
await 
mediator !
.! "
Send" &
(& '
new' * 
GetBusinessByIdQuery+ ?
{@ A
IdB D
=E F
idG I
}J K
)K L
;L M
} 	
[   	
HttpPost  	 
(   
$str   "
)  " #
]  # $
public!! 
async!! 
Task!! 
<!! 
ActionResult!! &
<!!& '
Result!!' -
<!!- .
Guid!!. 2
>!!2 3
>!!3 4
>!!4 5
CreateBusiness!!6 D
(!!D E
[!!E F
FromBody!!F N
]!!N O!
CreateBusinessCommand!!P e
command!!f m
)!!m n
{"" 	
var## 
result## 
=## 
await## 
mediator## '
.##' (
Send##( ,
(##, -
command##- 4
)##4 5
;##5 6
if$$ 
($$ 
!$$ 
result$$ 
.$$ 
	IsSuccess$$ !
)$$! "
{%% 
return&& 

BadRequest&& !
(&&! "
result&&" (
.&&( )
ErrorMessage&&) 5
)&&5 6
;&&6 7
}'' 
return(( 
CreatedAtAction(( "
(((" #
nameof((# )
((() *
CreateBusiness((* 8
)((8 9
,((9 :
new((; >
{((? @
id((A C
=((D E
result((F L
.((L M
Data((M Q
}((R S
,((S T
result((U [
.(([ \
Data((\ `
)((` a
;((a b
})) 	
[++ 	

HttpDelete++	 
(++ 
$str++ .
)++. /
]++/ 0
public,, 
async,, 
Task,, 
<,, 
ActionResult,, &
>,,& '
DeleteBusinessById,,( :
(,,: ;
Guid,,; ?
id,,@ B
),,B C
{-- 	
await.. 
mediator.. 
... 
Send.. 
(..  
new..  #!
DeleteBusinessCommand..$ 9
{..: ;

BusinessID..< F
=..G H
id..I K
}..L M
)..M N
;..N O
return// 
	NoContent// 
(// 
)// 
;// 
}00 	
[22 	
HttpPut22	 
(22 
$str22 +
)22+ ,
]22, -
public33 
async33 
Task33 
<33 
ActionResult33 &
<33& '
Result33' -
<33- .
object33. 4
>334 5
>335 6
>336 7
UpdateBusiness338 F
(33F G
Guid33G K
id33L N
,33N O
[33P Q
FromBody33Q Y
]33Y Z!
UpdateBusinessCommand33[ p
command33q x
)33x y
{44 	
if55 
(55 
id55 
!=55 
command55 
.55 

BusinessID55 (
)55( )
{66 
return77 

BadRequest77 !
(77! "
)77" #
;77# $
}88 
var99 
result99 
=99 
await99 
mediator99 '
.99' (
Send99( ,
(99, -
command99- 4
)994 5
;995 6
if;; 
(;; 
!;; 
result;; 
.;; 
	IsSuccess;; !
);;! "
{<< 
return== 

BadRequest== !
(==! "
result==" (
.==( )
ErrorMessage==) 5
)==5 6
;==6 7
}>> 
return@@ 
	NoContent@@ 
(@@ 
)@@ 
;@@ 
}AA 	
}BB 
}CC 